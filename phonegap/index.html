<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Assassin</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="js/service.js" ></script>
        <script type="text/javascript" charset="utf-8">
            // wait for device api libraries to load
            document.addEventListener("deviceready", onDeviceReady, false);
            
            // device api's are available
            function onDeviceReady() {
                navigator.geolocation.getCurrentPosition(onSuccess, onError);
            }
            
            // onSuccess Geolocation
            function onSuccess(position) {
                /*if(typeof(Storage)!=="undefined") {
                    sessionStorage.latitude = position.coords.latitude;
                    sessionStorage.longitude = position.coords.longitude;
                }
                else
                {
                    console.log("Sorry, your browser does not support web storage...");
                }*/
                                
                var element = document.getElementById('geolocation');
                element.innerHTML = 
                    'Latitude: ' + position.coords.latitude + '<br />' +
                    'Longitude: ' + position.coords.longitude + '<br />' + 
                    'Altitude: ' + position.coords.altitude + '<br />' +
                    'Accuracy: ' + position.coords.accuracy + '<br />' +
                    'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                    'Heading: '            + position.coords.heading               + '<br />' +
                    'Speed: '              + position.coords.speed                 + '<br />' +
                    'Timestamp: '          + position.timestamp                    + '<br />';
            }

            // onError Callback receives a PositionError object
            //
            function onError(error) {
                alert('code: '    + error.code    + '\n' +
                      'message: ' + error.message + '\n');
            }
            
            $(document).ready(function() {
                console.log("document ready");
                /*sessionStorage.longitude = 5;
                sessionStorage.latitude = 10;*/
                $("#btnCallService").click(function() {
                    console.log("btnCallService clicked");
                    CallService();
                });
                $("#btnJoinGame").click(function() {
                    console.log("btnJoinGame clicked");
                    event.preventDefault();
                    var name = $('#name').val();
                    var email = $('#email').val();
                    
                    JoinGame(name, email, sessionStorage.latitude, sessionStorage.longitude);
                });
            });
        </script>
    </head>
    
    <body>
        <h1>Assassin Game</h1>
        <p id="geolocation">Finding geolocation...</p>
        <form action="/">
            <input type="text" id="name" placeholder="Name" >
            <br>
            <input type="text" id="email" placeholder="Email" >
            <br>
            
            
            <input type="submit" value="Find Me!" onclick="onDeviceReady" >
            <input id="btnCallService" type="submit" value="Call Service" >
            <input id="btnJoinGame" type="submit" value="Join Game" >
        </form>
        <div id="result">result area</div>
    </body>
    <script type="text/javascript" src="phonegap.js"></script>
</html>